RewriteEngine On
RewriteBase /downloader/

# 1. Redirect /any/path.php to /any/path
# Capture the request relative to the rewrite base if possible, or matches full path
RewriteCond %{THE_REQUEST} \s/downloader/(.*?)\.php[\s?] [NC]
RewriteRule ^ %1 [L,R=301]

# 2. Internally map /any/path to /any/path.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*?)/?$ $1.php [L]

